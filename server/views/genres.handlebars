<main class="genres-container">
  <h2>Hi {{user.username}}! What kind of music would you like to listen to?</h2>
  <div class="outside-box">
    <div id="genre-container">
      {{#each genres as |genre|}}
        <div class="genre-box" data-genre="{{ genre }}">
          <h3>{{ genre }}</h3>
        </div>
      {{/each}}
    </div>
    <a id="exit-btn" href="/home">Cancel</a>
    <a id="ready-btn" href="javascript:void(0)">Ready</a>
  </div>
</main>

<script src="script/genres.js"></script>
<script>
  window.onload = () => {
    showActualUserGenres();
  }

  // Función que resalta los géneros elegidos anteriormente por el usuario
  const showActualUserGenres= () => {
    const userGenres = "{{user.userGenres}}";
    
    // Si el usuario no tiene géneros elegidos, se cambia el texto y la ruta del botón cancelar. Se sale de la función
    if (!userGenres) {
      document.getElementById("exit-btn").textContent = "Later";
      document.getElementById("exit-btn").href ="/setProfile";
      return;
    }  
    
    const actualGenres = userGenres.split(",");

    actualGenres.forEach(genre => {
      boxesArr.forEach(box => {
        if (genre === box.getAttribute("data-genre")){
          box.classList.add("active-genre");
        }
      });
    });
  }
</script>